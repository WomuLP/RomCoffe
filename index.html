<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Cafeter√≠a ‚Ä¢ Men√∫</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header class="site-header">
      <img class="banner" src="https://images.unsplash.com/photo-1461988625982-7e46a099bf4f?w=1600&q=80&auto=format&fit=crop" alt="Banner cafeter√≠a" />
      <div class="header-overlay">
        <h1 class="brand">Tu Caf√© Favorito</h1>
        <p class="tag">Buenos momentos, mejor caf√©</p>
      </div>
    </header>

    <nav class="category-menu">
      <button class="chip active" data-category="all">todos</button>
      <button class="chip" data-category="cafe">caf√©</button>
      <button class="chip" data-category="tes">t√©s</button>
      <button class="chip" data-category="bebidas-frias">bebidas fr√≠as</button>
      <button class="chip" data-category="desayuno">desayuno</button>
      <button class="chip" data-category="almuerzo">almuerzo</button>
      <button class="chip" data-category="postres">postres</button>
    </nav>

    <main>
      <section class="products" id="productos">
        <h2 class="section-title">Productos</h2>
        <div class="product-grid" id="productGrid">
          <!-- Los productos se generar√°n din√°micamente con JavaScript -->
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="footer-inner">
        <div class="footer-col">
          <h3 class="footer-brand">Colorlib</h3>
          <p>Hecho con amor para servir excelente caf√© y buena vibra.</p>
        </div>
        <nav class="footer-col">
          <h4>Info</h4>
          <ul class="footer-links">
            <li><a href="#">Home</a></li>
            <li><a href="#">About Us</a></li>
            <li><a href="#">Portfolio</a></li>
            <li><a href="#">Contact</a></li>
          </ul>
        </nav>
        <nav class="footer-col">
          <h4>Legal</h4>
          <ul class="footer-links">
            <li><a href="#">Privacy Policy</a></li>
            <li><a href="#">Terms &amp; Conditions</a></li>
          </ul>
        </nav>
        <div class="footer-col align-end">
          <a class="btn contact" href="#">Contactar</a>
        </div>
      </div>
      <div class="footer-bottom">¬© <span id="currentYear"></span> Cafeter√≠a. Todos los derechos reservados.</div>
    </footer>

    <script>
      /* ========================================
         DATOS Y CONFIGURACI√ìN
      ======================================== */
      
      // Base de datos de productos
      const products = [
        {
          image: 'https://images.unsplash.com/photo-1504754524776-8f4f37790ca0?w=1200&q=80&auto=format&fit=crop',
          name: 'Caf√© Latte',
          price: 3900,
          description: 'Espresso suave con leche vaporizada y una capa de espuma.',
          ingredients: ['Espresso', 'Leche', 'Espuma de leche'],
          category: 'cafe'
        },
        {
          image: 'https://images.unsplash.com/photo-1498804103079-a6351b050096?w=1200&q=80&auto=format&fit=crop',
          name: 'Cold Brew',
          price: 4500,
          description: 'Caf√© infusionado en fr√≠o durante 16 horas. Refrescante y suave.',
          ingredients: ['Caf√© molido', 'Agua filtrada', 'Hielo'],
          category: 'bebidas-frias'
        },
        {
          image: 'https://images.unsplash.com/photo-1540189549336-e6e99c3679fe?w=1200&q=80&auto=format&fit=crop',
          name: 'Sandwich Club',
          price: 6900,
          description: 'Pan tostado con pollo, tocino, vegetales y salsa especial.',
          ingredients: ['Pan', 'Pollo', 'Tocino', 'Lechuga', 'Tomate', 'Salsa'],
          category: 'almuerzo'
        },
        {
          image: 'https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=1200&q=80&auto=format&fit=crop',
          name: 'Ensalada C√©sar',
          price: 5500,
          description: 'Cl√°sica ensalada con aderezo c√©sar y crutones.',
          ingredients: ['Lechuga', 'Pollo', 'Parmesano', 'Crutones', 'Aderezo c√©sar'],
          category: 'almuerzo'
        }
      ];

      /* ========================================
         GESTI√ìN DE PRODUCTOS
      ======================================== */
      
      // Generar tarjetas de productos
      function generateProductCards(productsToShow = products) {
        const productGrid = document.getElementById('productGrid');
        productGrid.innerHTML = '';

        productsToShow.forEach(product => {
          const productCard = document.createElement('article');
          productCard.className = 'card';
          productCard.innerHTML = `
            <div class="card-media">
              <img src="${product.image}" alt="${product.name}" />
            </div>
            <div class="card-body">
              <div class="card-head">
                <h3 class="card-title">${product.name}</h3>
                <span class="price">$${product.price.toLocaleString('es-AR')}</span>
              </div>
              <p class="card-desc">${product.description}</p>
              <ul class="ingredients">
                ${product.ingredients.map(ingredient => `<li>${ingredient}</li>`).join('')}
              </ul>
              <button class="btn primary" onclick="addToCart('${product.name}', ${product.price}, '${product.image}')">Agregar al carrito</button>
            </div>
          `;
          productGrid.appendChild(productCard);
        });
      }

      // Filtrar productos por categor√≠a
      function filterProducts(category) {
        if (category === 'all') {
          generateProductCards();
        } else {
          const filteredProducts = products.filter(product => product.category === category);
          generateProductCards(filteredProducts);
        }
      }

      // Inicializar filtros de categor√≠a
      function initCategoryFilters() {
        const categoryButtons = document.querySelectorAll('.category-menu .chip');
        
        categoryButtons.forEach(button => {
          button.addEventListener('click', function() {
            // Remover clase active de todos los botones
            categoryButtons.forEach(btn => btn.classList.remove('active'));
            // Agregar clase active al bot√≥n clickeado
            this.classList.add('active');
            
            // Filtrar productos
            const category = this.getAttribute('data-category');
            filterProducts(category);
          });
        });
      }

      /* ========================================
         CARRITO DE COMPRAS
      ======================================== */
      
      // Estado del carrito
      let cart = [];

      // Crear elementos del carrito
      const cartPanel = document.createElement('div');
      cartPanel.className = 'cart-panel';
      cartPanel.innerHTML = `
        <div class="cart-header">
          <h4 class="cart-title">TU PEDIDO</h4>
          <button class="cart-remove" id="cartClear">Quitar</button>
        </div>
        <ul class="cart-items" id="cartItems"></ul>
        <div class="cart-footer">
          <span class="cart-total" id="cartTotal">$0.00</span>
          <button class="btn primary" id="cartCheckout">Finalizar</button>
        </div>
      `;
      document.body.appendChild(cartPanel);

      const cartFab = document.createElement('button');
      cartFab.className = 'cart-fab';
      cartFab.setAttribute('aria-label', 'Abrir carrito');
      cartFab.innerHTML = `
        <span class="fab-icon">üõí</span>
        <span class="badge" id="cartCount">0</span>`;
      document.body.appendChild(cartFab);

      // Persistencia del carrito
      function saveCart() { 
        localStorage.setItem('cart', JSON.stringify(cart)); 
      }
      
      function loadCart() {
        try { 
          cart = JSON.parse(localStorage.getItem('cart')) || []; 
        }
        catch(e) { 
          cart = []; 
        }
      }

      // Actualizar interfaz del carrito
      function updateCartUI() {
        const itemsEl = document.getElementById('cartItems');
        const totalEl = document.getElementById('cartTotal');
        const countEl = document.getElementById('cartCount');
        itemsEl.innerHTML = '';
        let total = 0;
        
        cart.forEach((item, index) => {
          total += item.price * item.qty;
          const li = document.createElement('li');
          li.className = 'cart-item';
          li.innerHTML = `
            <img src="${item.image}" alt="${item.name}" class="cart-item-image">
            <span class="name">${item.name}</span>
            <span class="price">$${(item.price * item.qty).toLocaleString('es-AR')}</span>
            <span class="qty-controls" data-index="${index}">
              <button class="qty-btn" data-action="dec">‚àí</button>
              <span class="qty-value">${item.qty}</span>
              <button class="qty-btn" data-action="inc">+</button>
            </span>
          `;
          itemsEl.appendChild(li);
        });
        
        totalEl.textContent = `$${total.toLocaleString('es-AR')}`;
        const totalQty = cart.reduce((a, b) => a + b.qty, 0);
        countEl.textContent = totalQty;
        saveCart();
      }

      // Agregar producto al carrito
      function addToCart(productName, price, imageUrl) {
        const existing = cart.find(p => p.name === productName);
        if (existing) {
          existing.qty += 1;
        } else {
          cart.push({ name: productName, price: price, qty: 1, image: imageUrl });
        }
        updateCartUI();
        
        // Animaci√≥n del bot√≥n del carrito
        cartFab.classList.add('bounce');
        setTimeout(() => {
          cartFab.classList.remove('bounce');
        }, 600);
      }

      // Event listeners del carrito
      cartFab.addEventListener('click', function(){
        cartPanel.classList.toggle('open');
        
        // Si se est√° abriendo, agregar animaci√≥n de entrada
        if (cartPanel.classList.contains('open')) {
          setTimeout(() => {
            cartPanel.style.display = 'block';
          }, 10);
        }
      });

      cartPanel.addEventListener('click', function(e){
        if (e.target && e.target.id === 'cartClear') {
          cart.length = 0;
          updateCartUI();
        }
        if (e.target && e.target.id === 'cartCheckout') {
          alert('Gracias por tu pedido!');
          cart.length = 0;
          updateCartUI();
          cartPanel.classList.remove('open');
        }
      });

      // Event delegation para controles de cantidad
      document.addEventListener('click', function(e){
        if (e.target && e.target.closest('.qty-controls')) {
          const group = e.target.closest('.qty-controls');
          const idx = parseInt(group.getAttribute('data-index'), 10);
          const action = e.target.getAttribute('data-action');
          if (action === 'inc') { cart[idx].qty += 1; }
          if (action === 'dec') { cart[idx].qty = Math.max(1, cart[idx].qty - 1); }
          updateCartUI();
        }
      });

      /* ========================================
         CARRUSEL DE DESTACADOS
      ======================================== */
      
      // Renderizar carrusel de destacados
      function renderCarousel() {
        const main = document.querySelector('main');
        const section = document.createElement('section');
        section.className = 'nc-section';
        section.innerHTML = `
          <div class="nc-container">
            <input type="radio" name="nc-slider" id="item-1" checked>
            <input type="radio" name="nc-slider" id="item-2">
            <input type="radio" name="nc-slider" id="item-3">
            <div class="nc-cards">
              <label class="nc-card" for="item-1" id="nc-card-1">
                <img src="https://images.unsplash.com/photo-1530651788726-1dbf58eeef1f?w=1200&q=80&auto=format&fit=crop" alt="Slide 1">
              </label>
              <label class="nc-card" for="item-2" id="nc-card-2">
                <img src="https://images.unsplash.com/photo-1559386484-97dfc0e15539?w=1200&q=80&auto=format&fit=crop" alt="Slide 2">
              </label>
              <label class="nc-card" for="item-3" id="nc-card-3">
                <img src="https://images.unsplash.com/photo-1533461502717-83546f485d24?w=1200&q=80&auto=format&fit=crop" alt="Slide 3">
              </label>
            </div>
            <div class="nc-player">
              <div class="nc-info-area">
                <strong class="nc-title">Destacados</strong>
                <span class="nc-subtitle">Disfruta nuestras especialidades</span>
                <span class="nc-time">Hoy</span>
              </div>
            </div>
          </div>`;
        main.appendChild(section);
      }

      /* ========================================
         FOOTER
      ======================================== */
      
      // Actualizar a√±o en el footer
      function updateFooterYear() {
        const currentYear = new Date().getFullYear();
        document.getElementById('currentYear').textContent = currentYear;
      }

      /* ========================================
         INICIALIZACI√ìN
      ======================================== */
      
      // Inicializar aplicaci√≥n cuando el DOM est√© listo
      document.addEventListener('DOMContentLoaded', function() {
        loadCart();
        generateProductCards();
        updateCartUI();
        initCategoryFilters();
        updateFooterYear();
        renderCarousel();
      });
    </script>
  </body>
</html>